<div class="saved-recipes-container">
  <h2 class="title" i18n>Pratos</h2>

  <!-- Seta para voltar -->
  <div class="back-arrow" (click)="goBack()">&#x276E;</div>

  <!-- Imagem da logo -->
  <img src="assets/images/logo.svg" alt="DieTI" class="logo-image" />

  @if (recipes.length === 0) {
    <p i18n>Parece que ainda não há pratos salvos.</p>
  } @else {
    @for (recipe of recipes; track recipe._id) {
      <div class="recipe-card" [class.favorited]="isFavorite(recipe)">
        <!-- Botão de favorito -->
        <div class="favorite-toggle" (click)="toggleFavorite(recipe); $event.stopPropagation()">
          &#10084;
        </div>

        <!-- Visualização Simples (sem edição) -->
        <h3>{{ recipe.name }}</h3>
        <p class="item">
          <strong i18n>Calorias:</strong> 
          {{ recipe.calorias | number:'1.0-0' }} kcal 
          <span class="per-100g" i18n>(por 100g)</span>
        </p>
        <p class="item">
          <strong i18n>Proteínas:</strong> 
          {{ recipe.proteinas | number:'1.1-1' }}g 
          <span class="per-100g" i18n>(por 100g)</span>
        </p>
        <p class="item">
          <strong i18n>Carboidratos:</strong> 
          {{ recipe.carbo | number:'1.1-1' }}g 
          <span class="per-100g" i18n>(por 100g)</span>
        </p>
        <p class="item">
          <strong i18n>Gordura:</strong> 
          {{ recipe.gordura | number:'1.1-1' }}g 
          <span class="per-100g" i18n>(por 100g)</span>
        </p>

        <details>
          <summary i18n>Lista de Ingredientes</summary>
          <ul>
            @for (ing of recipe.ingredients; track $index) {
              <li>{{ ing.description || ing.food?.description }} — {{ ing.grams }}g</li>
            }
          </ul>
        </details>

        <div class="card-actions">
          <button (click)="deleteRecipe(recipe._id)" class="btn-delete" i18n>Deletar</button>
        </div>
      </div>
    }
  }
</div>