<div class="recovery-code-container">
  <h2 i18n>Código de Recuperação</h2>
  
  <!-- Logo -->
  <img src="assets/images/logo.svg" alt="DieTI" class="logo-image" />

  <!-- Formulário -->
  <form (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="code" i18n>Código:</label>
      <input
        type="text"
        id="code"
        name="code"
        [(ngModel)]="code"
        required
        maxlength="6"
        minlength="6"
        pattern="[0-9]{6}"
        class="input-field"
        placeholder="Digite o código de 6 dígitos"
        inputmode="numeric"
        autocomplete="one-time-code"
        [class.invalid]="code.length > 0 && !isCodeValid()" />
      
      @if (code.length > 0 && !isCodeValid()) {
        <div class="error-message" i18n>
          Código inválido. Deve ter exatamente 6 dígitos numéricos.
        </div>
      }
    </div>

    <div class="form-group">
      <label for="newPassword" i18n>Nova Senha:</label>
      <input 
        type="password" 
        id="newPassword"
        name="newPassword"
        [(ngModel)]="newPassword"
        required
        minlength="6"
        class="input-field"
        placeholder="Digite sua nova senha"
        [class.invalid]="newPassword.length > 0 && newPassword.length < 6" />
      
      @if (newPassword.length > 0 && newPassword.length < 6) {
        <div class="error-message" i18n>
          A senha deve ter pelo menos 6 caracteres.
        </div>
      }
    </div>

    <div class="form-group">
      <label for="confirmPassword" i18n>Confirmar Senha:</label>
      <input
        type="password" 
        id="confirmPassword"
        name="confirmPassword"
        [(ngModel)]="confirmPassword"
        required
        class="input-field"
        placeholder="Confirme sua nova senha"
        [class.invalid]="confirmPassword.length > 0 && passwordsDontMatch()" />
      
      @if (confirmPassword.length > 0 && passwordsDontMatch()) {
        <div class="error-message" i18n>
          As senhas não coincidem.
        </div>
      }
    </div>

    <button 
      type="submit" 
      [disabled]="!isFormValid()"
      class="btn-primary" 
      i18n>
      Redefinir Senha
    </button>
  </form>

  <!-- Voltar para login -->
  <div class="back-link">
    <a (click)="goToSignIn()" i18n>Voltar ao Login</a>
  </div>
</div>